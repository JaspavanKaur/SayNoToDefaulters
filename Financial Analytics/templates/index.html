<!doctype html>
<html lang="en-US">

<head>
  <link rel=”stylesheet” href="style.css">
      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
      <!-- <link rel="stylesheet" href="../resources/templates/main_css.css" /> -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
      <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>

  <header> 
    <style>
      .center {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
        border: 3px solid green; 
      }

      </style>
      <!-- <style>
        form {
              margin: 25px 50px 75px 60px;
        }
        </style> -->

    <div class="center">
      <h1 class="logo">ABC BANK&nbsp;</h1>
      <img src="../static/ABC Bank logo.png" 
        alt="ABC Bank logo"
        width="120" height="120" 
        class = "left" >
    </div>
    
  </header>
</head>
<body>
  <style>
  h2 {
        margin: 20px 50px 30px 30px;
  }
  </style>
  <h2 class="hero_header"> <span class="light">Please enter customer details below to assess customer risk&nbsp; &nbsp;</span></h2>
<div id ="app">
  <!-- <style>
    form {
          margin: 25px 50px 75px 60px;
    }
    </style> -->
  <!-- <label for="ID">ID:</label>
  <input type="text" id="ID" name="ID"><br><br> -->
 
<!-- Would including Gender be a form of discrimination?
  <label for="Gender">Gender:</label>
  <select name="Gender" id="Gender">
    <option value="F">F</option>
    <option value="M">M</option>
  </select><br><br> -->
 
 
  <label for="Age">Age:</label>
  <input type="number" id="Age" name="Age" v-model="age"><br><br>
 
  <label for="Marriage Status">Marriage Status:</label>
  <select name="Marriage Status" id="Marriage Status" v-model="marriage">
    <option value="Civil Marriage">Civil Marriage</option>
    <option value="Married">Married</option>
    <option value="Seperated">Seperated</option>
    <option value="Single / not married">Single / not married</option>
    <option value="Widow">Widow</option>
  </select><br><br>
 
  <label for="Housing Type">Housing Type:</label>
  <select name="Housing Type" id="Housing Type" v-model="housing">
    <option value="Co-op apartment">Co-op apartment</option>
    <option value="House / apartment">House / apartment</option>
    <option value="Office apartment">Office apartment </option>
    <option value="Rented apartment">Rented apartment</option>
    <option value="With parents">With parents</option>
  </select><br><br>

  <label for="Income Type">Income Type:</label>
  <select name="Income Type" id="Income Type" v-model="income_type">
    <option value="Commercial associate">Commercial associate</option>
    <option value="Pensioner">Pensioner</option>
    <option value="State servant">State servant</option>
    <option value="Student">Student</option>
    <option value="Working">Working</option>
  </select><br><br>



  <label for="Occupation">Occupation:</label>
  <select name="Occupation" id="Occupation" v-model="occupation">
    <option value="Accountants">Accountants</option>
    <option value="Cleaning staff">Cleaning staff</option>
    <option value="Cooking staff">Cooking staff</option>
    <option value="Core staff">Core staff</option>
    <option value="Drivers">Drivers</option>
    <option value="HR staff">HR staff</option>
    <option value="High skill tech staff">High skill tech staff</option>
    <option value="IT staff">IT staff</option>
    <option value="Laborers">Laborers</option>
    <option value="Managers">Managers</option>
    <option value="Medicine staff">Medicine staff</option>
    <option value="Pensioner">Pensioner</option>
    <option value="Private service staff">Private service staff</option>
    <option value="Realty agents">Realty agents</option>
    <option value="Sales staff">Sales staff</option>
    <option value="Secretaries">Secretaries</option>
    <option value="Security staff">Security staff</option>
    <option value="Waiters/barmen staff">Waiters/barmen staff</option>
    <option value="Private">Others/Prefer not to say</option>
  </select><br><br>
  
  <label for="Education">Education:</label>
  <select name="Education" id="Education" v-model="education">
    <option value="Academic degree">Academic degree</option>
    <option value="Higher education">Higher education</option>
    <option value="Incomplete higher">Incomplete higher</option>
    <option value="Lower secondary">Lower secondary</option>
    <option value="Secondary / secondary special">Secondary / secondary special</option>
    </select><br><br>

  <label for="Days Employed">Days Employed:</label>
  <input type="number" id="Days Employed" name="Days Employed" v-model="demployed"><br><br>
 
  <label for="Realty">Realty:</label>
  <select name="Realty" id="Realty" v-model="realty">
    <option value="Y">Y</option>
    <option value="N">N</option>
  </select><br><br>

  <label for="Total Income">Total Yearly Income (USD$):</label>
  <input type="number" id="Total Income" name="Total Income" v-model="income"><br><br>
 
  <label for="Count of family member">Count of family member:</label>
  <input type="number" id="Count of family member" name="Count of family member" v-model="family"><br><br>
 
  <input type="submit" value="Submit" @click="addCustomer()" v-on:submit.prevent="onSubmit">
</form>
<div>
<!-- 
  add vif for result here -->
  <div v-if="result == 'Good'" id="modal-1" title="Approve Client">
    <p class="my-4">This client is Good. This is based on our accuracy of 99.80%. We reccomend that you approve the client</p>
  </div>
  <div v-else id="modal-1" title="Reject Client">
    <p class="my-4">This client is Bad. This is based on our accuracy of 99.80%. We reccommend that you reject the client</p>
  </div>
</div>
</div>
<script>
var prediction_url = "http://127.0.0.1:5001/predict";
var app = new Vue({
  el: "#app",
  data: {
    result: "",
    age: 0,
    marriage: "",
    occupation: "",
    education: "",
    demployed: 0,
    realty: "",
    income: 0,
    family: 0,
    income_type: "",
    housing: 0

  },
  methods: {
    addCustomer: function () {
        // on Vue instance created, load the book list
        let jsonData = JSON.stringify({
          age: this.age,
          marriage: this.marriage,
          occupation: this.occupation,
          education: this.education,
          demployed: this.demployed,
          realty: this.realty,
          income: this.income,
          family: this.family,
          income_type: this.income_type,
          housing: this.housing
            });
        const response =
        fetch(`${prediction_url}`, {
                method: "POST",
                headers: {
                    "Content-type": "application/json"
                },
                body: jsonData
            })
        .then(response => response.json())
        .then(data => {
            console.log(response);
            console.log(data.data.result.prediction);
            if (data.code === 404) {
                // no book in db
                this.message = data.message;
            } else {
              this.result = data.data.result.prediction;
              console.log(this.result);
            }
        })
        .catch(error => {
            // Errors when calling the service; such as network error, 
            // service offline, etc
            console.log(this.message + error);
        });
    }
  }
  // ,
  // created: function () {
  //     // on Vue instance created, load predictions
  //     this.getPredictions();
  // }
})
</script>
<!-- 
<script>
  var prediction_url = "http://127.0.0.1:5003/predict"
</script> -->

<!-- <script>
  var prediction_url = "http://127.0.0.1:5003/predict";

  var app = new Vue({
    el: "#app",
    delimiters: ['${', '}'],
    data: {
      current: {},
      hourly: [],
      daily: [],
      d: 'table-danger',
      w: 'table-warning',
      s: 'table-success'
    },
    methods: {
      getPredictions: function () {
          // on Vue instance created, load the book list
          const response =
              fetch(prediction_url)
                  .then(response => response.json())
                  .then(data => {
                      // console.log(response);
                      console.log(data.data);
                      if (data.code === 404) {
                          // no book in db
                          this.message = data.message;
                      } else {
                        this.daily = data.data.daily;
                        this.current = data.data.current;
                        this.hourly = data.data.hourly;
                        console.log(this.daily);
                      }
                  })
                  .catch(error => {
                      // Errors when calling the service; such as network error, 
                      // service offline, etc
                      console.log(this.message + error);

                  });

      }
    },
    created: function () {
        // on Vue instance created, load predictions
        this.getPredictions();
    }
  }) -->

<!-- </script> -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<!-- <script type="text/javascript" src="vue.js"></script>  -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</html>
